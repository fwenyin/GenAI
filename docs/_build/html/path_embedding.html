<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>path_embedding module &mdash; LocalRAG 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=d45e8c67"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="query module" href="query.html" />
    <link rel="prev" title="record_manager_embedding module" href="record_manager_embedding.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            LocalRAG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">src</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="record_manager_embedding.html">record_manager_embedding module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">path_embedding module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#path_embedding.DocumentHandler"><code class="docutils literal notranslate"><span class="pre">DocumentHandler</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#path_embedding.DocumentHandler.check_documents"><code class="docutils literal notranslate"><span class="pre">DocumentHandler.check_documents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#path_embedding.DocumentHandler.create_loader"><code class="docutils literal notranslate"><span class="pre">DocumentHandler.create_loader()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#path_embedding.DocumentHandler.load_documents"><code class="docutils literal notranslate"><span class="pre">DocumentHandler.load_documents()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#path_embedding.DocumentHandler.load_metadata"><code class="docutils literal notranslate"><span class="pre">DocumentHandler.load_metadata()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#path_embedding.DocumentHandler.save_metadata"><code class="docutils literal notranslate"><span class="pre">DocumentHandler.save_metadata()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#path_embedding.DocumentHandler.split_documents"><code class="docutils literal notranslate"><span class="pre">DocumentHandler.split_documents()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#path_embedding.EmbeddingManager"><code class="docutils literal notranslate"><span class="pre">EmbeddingManager</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#path_embedding.EmbeddingManager.setup_vectorstore"><code class="docutils literal notranslate"><span class="pre">EmbeddingManager.setup_vectorstore()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#path_embedding.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="query.html">query module</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html">app module</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LocalRAG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">src</a></li>
      <li class="breadcrumb-item active">path_embedding module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/path_embedding.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="path-embedding-module">
<h1>path_embedding module<a class="headerlink" href="#path-embedding-module" title="Link to this heading"></a></h1>
<p id="module-path_embedding">Document Processing and Embedding Management Module.</p>
<p>This module is designed for document processing and embedding management, utilizing Azure Cognitive Services for its operations. It specifically leverages the Azure OpenAI service to generate embeddings for documents.
Dynamic path embedding by updating json file of documents that have been embedded, only documents that have new filenames will be embedded.</p>
<p>Requirements:
- Azure authentication is required to access Azure Cognitive Services. Use ‘az login’ to authenticate the Azure CLI before running any operations.
- In cases where the HTTPS connection exceeds maximum retries due to network issues, execute the following command:</p>
<blockquote>
<div><p>az account get-access-token –resource <a class="reference external" href="https://cognitiveservices.azure.com">https://cognitiveservices.azure.com</a> –query “accessToken” -o tsv</p>
</div></blockquote>
<p>Classes:
- DocumentHandler: Manages the loading, preprocessing, and splitting of documents into manageable chunks.
- EmbeddingManager: Handles the generation of embeddings and manages vector storage operations, ensuring efficient data retrieval and storage.</p>
<p>Usage:
This module can be imported to integrate document processing and embedding functionalities into applications requiring advanced text analysis and processing capabilities.</p>
<dl class="py class">
<dt class="sig sig-object py" id="path_embedding.DocumentHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">path_embedding.</span></span><span class="sig-name descname"><span class="pre">DocumentHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'metadata.json'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#DocumentHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.DocumentHandler" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Handles operations related to document processing such as loading, preprocessing and splitting into manageable chunks.</p>
<dl class="py method">
<dt class="sig sig-object py" id="path_embedding.DocumentHandler.check_documents">
<span class="sig-name descname"><span class="pre">check_documents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#DocumentHandler.check_documents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.DocumentHandler.check_documents" title="Link to this definition"></a></dt>
<dd><p>Check each document to see if it needs embedding and update metadata for new documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of file paths that are already present in the metadata, and will be excluded from the document loader.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="path_embedding.DocumentHandler.create_loader">
<span class="sig-name descname"><span class="pre">create_loader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#DocumentHandler.create_loader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.DocumentHandler.create_loader" title="Link to this definition"></a></dt>
<dd><p>Creates a loader for unstructured files with specific text cleaning post-processors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – The path to the directory of raw files to process.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A loader configured for handling unstructured files.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>DirectoryLoader</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="path_embedding.DocumentHandler.load_documents">
<span class="sig-name descname"><span class="pre">load_documents</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#DocumentHandler.load_documents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.DocumentHandler.load_documents" title="Link to this definition"></a></dt>
<dd><p>Loads documents using the provided loader.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of loaded documents.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="path_embedding.DocumentHandler.load_metadata">
<span class="sig-name descname"><span class="pre">load_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#DocumentHandler.load_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.DocumentHandler.load_metadata" title="Link to this definition"></a></dt>
<dd><p>Load metadata from a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A dictionary containing the metadata of the documents. If no metadata file exists,</dt><dd><p>returns an empty dictionary.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="path_embedding.DocumentHandler.save_metadata">
<span class="sig-name descname"><span class="pre">save_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#DocumentHandler.save_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.DocumentHandler.save_metadata" title="Link to this definition"></a></dt>
<dd><p>Save metadata to a JSON file.</p>
<blockquote>
<div><dl class="simple">
<dt>Args:</dt><dd><p>metadata (dict): A dictionary containing the metadata for each document processed.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="path_embedding.DocumentHandler.split_documents">
<span class="sig-name descname"><span class="pre">split_documents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">documents</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#DocumentHandler.split_documents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.DocumentHandler.split_documents" title="Link to this definition"></a></dt>
<dd><p>Splits loaded documents into smaller chunks based on specified separators.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>documents</strong> (<em>list</em>) – The documents to split.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of document chunks.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="path_embedding.EmbeddingManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">path_embedding.</span></span><span class="sig-name descname"><span class="pre">EmbeddingManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding_function</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#EmbeddingManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.EmbeddingManager" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages embedding generation and vector storage operations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="path_embedding.EmbeddingManager.setup_vectorstore">
<span class="sig-name descname"><span class="pre">setup_vectorstore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">docs_split</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#EmbeddingManager.setup_vectorstore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.EmbeddingManager.setup_vectorstore" title="Link to this definition"></a></dt>
<dd><p>Sets up or loads a vectorstore and stores the embedded document chunks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>docs_split</strong> (<em>list</em>) – Document chunks to embed and store.</p></li>
<li><p><strong>persist</strong> (<em>bool</em>) – If True, persist data on disk.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="path_embedding.main">
<span class="sig-prename descclassname"><span class="pre">path_embedding.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/path_embedding.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#path_embedding.main" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="record_manager_embedding.html" class="btn btn-neutral float-left" title="record_manager_embedding module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="query.html" class="btn btn-neutral float-right" title="query module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Wen Yin.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>